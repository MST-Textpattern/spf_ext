# spf_ext v0.31
# External file editor
# Simon Finch
# https://github.com/spiffin/spf_ext

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMjp7czo0OiJuYW1lIjtzOjc6InNwZl9leHQiO3M6NzoidmVyc2lvbiI7czo0OiIwLjMx
IjtzOjY6ImF1dGhvciI7czoxMToiU2ltb24gRmluY2giO3M6MTA6ImF1dGhvcl91cmkiO3M6
MzQ6Imh0dHBzOi8vZ2l0aHViLmNvbS9zcGlmZmluL3NwZl9leHQiO3M6MTE6ImRlc2NyaXB0
aW9uIjtzOjIwOiJFeHRlcm5hbCBmaWxlIGVkaXRvciI7czo1OiJvcmRlciI7czoxOiI1Ijtz
OjQ6InR5cGUiO3M6MToiMyI7czo1OiJmbGFncyI7czoxOiIyIjtzOjg6InRleHRwYWNrIjtz
OjU4NzoiI0BzcGZfZXh0CnNwZl9leHRfZmlsZXMgPT4gRXh0ZXJuYWwgRmlsZXMKc3BmX2V4
dF9kaXIgPT4gRXh0ZXJuYWwgZmlsZXMgZGlyZWN0b3J5CnNwZl9maWxlbmFtZSA9PiBGaWxl
bmFtZQpzcGZfZWRpdF9maWxlID0+IFlvdSBhcmUgZWRpdGluZyBmaWxlCnNwZl9hbGxfZmls
ZXMgPT4gQWxsIEZpbGVzCnNwZl9maWxlX3VwZGF0ZWQgPT4gRmlsZSA8c3Ryb25nPntuYW1l
fTwvc3Ryb25nPiB1cGRhdGVkLgpzcGZfZmlsZV9uYW1lID0+IEV4dGVybmFsIGZpbGUgbmFt
ZQpzcGZfY29weV9maWxlID0+ICYjODIzMDtvciBjb3B5IGZpbGUgYXMKc3BmX2NyZWF0ZV9u
ZXdfZmlsZSA9PiBDcmVhdGUgbmV3IGZpbGUKc3BmX2ZpbGVfY3JlYXRlZCA9PiBGaWxlIDxz
dHJvbmc+e25hbWV9PC9zdHJvbmc+IGNyZWF0ZWQuCnNwZl9maWxlX25hbWVfcmVxdWlyZWQg
PT4gUGxlYXNlIHByb3ZpZGUgYSBuYW1lIGZvciB5b3VyIGZpbGUuCnNwZl9maWxlX2V4aXN0
cyA9PiBGaWxlIDxzdHJvbmc+e25hbWV9PC9zdHJvbmc+IGFscmVhZHkgZXhpc3RzLgpzcGZf
ZmlsZV9kZWxldGVkID0+IEZpbGUgPHN0cm9uZz57bmFtZX08L3N0cm9uZz4gZGVsZXRlZC4i
O3M6NDoiaGVscCI7czozMjYxOiI8aDE+c3BmX2V4dDwvaDE+Cgo8cD5FeHRlcm5hbCBmaWxl
IGVkaXRvciBwbHVnaW4uIENyZWF0ZSwgZWRpdCBhbmQgZGVsZXRlIGV4dGVybmFsICh0byBU
ZXh0cGF0dGVybikgZmlsZXMgaW4gVGV4dHBhdHRlcm4gYWRtaW4uPC9wPgo8cD48c3Ryb25n
PlJFUVVJUkVTOiBUZXhwYXR0ZXJuIDQuNS4xIGFuZCBQSFAgNSBhbmQgc2hlbGwgYWNjZXNz
IChmb3Igc3ltLWxpbmtpbmcgZXhpc3RpbmcgZmlsZXMpLjwvc3Ryb25nPjwvcD4KPHA+PGEg
aHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL3NwaWZmaW4vc3BmX2V4dC9ibG9iL21hc3Rlci9z
cGZfZXh0X3YwLjIudHh0Ij5Vc2UgdGhpcyB2ZXJzaW9uIGZvciBUZXh0cGF0dGVybiA0LjQu
MSBhbmQgYmVsb3c8L2E+LjwvcD4KPHA+PHN0cm9uZz5QbGVhc2UgcmVhZCB0aGUgaW5zdHJ1
Y3Rpb25zIGFuZCBub3RlcyBiZWxvdyBiZWZvcmUgdXNlLjwvc3Ryb25nPjwvcD4KPHA+VGhp
cyBwbHVnaW4gY3JlYXRlcyBleHRlcm5hbCBmaWxlcyB5b3UgY2FuIG1hbmFnZSBhbmQgZWRp
dCB2aWEgdGhlIGFkbWluIGludGVyZmFjZS4gQWxsIGZpbGVzIGFyZSBzYXZlZCB0byB0aGUg
ZGlyZWN0b3J5IHlvdSBjcmVhdGUgaW4gc3RlcCAxIG9mIHRoZSBpbnN0cnVjdGlvbnMgYmVs
b3cuIFN5bnRheCBoaWdobGlnaHRpbmcgaXMgYXZhaWxhYmxlIHZpYSA8YSBocmVmPSJodHRw
czovL2dpdGh1Yi5jb20vc3BpZmZpbi9zcGZfY29kZW1pcnJvciI+c3BmX2NvZGVtaXJyb3I8
L2E+IChjdXJyZW50bHkgSFRNTCwgUEhQIGFuZCBKYXZhU2NyaXB0IC0gbW9yZSB0byBjb21l
KS48L3A+Cgo8aDI+V2h5PzwvaDI+Cjx1bD4KPGxpPlRoaXMgcGx1Z2luIGFsbG93cyB5b3Ug
dG8gZWRpdCBhbmQgbWFuYWdlIHNpdGUgZmlsZXMgcmVzaWRpbmcgb3V0c2lkZSBUZXh0cGF0
dGVybiB3aXRoaW4gdGhlIFRleHRwYXR0ZXJuIGFkbWluIGFyZWEgKHNlZSDigJhQcm9jZWR1
cmUgZm9yIG1hbmFnaW5nIGV4aXN0aW5nIGZpbGVz4oCZIGJlbG93KS48L2xpPgo8bGk+SXQg
b2ZmZXJzIGFuIGVhc3kgd2F5IHRvIGNyZWF0ZSBzdGF0aWMgZmlsZXMgeW91IGNhbiBlZGl0
IGFuZCBhY2Nlc3MgdmlhIHlvdXIgcGFnZSB0ZW1wbGF0ZXM6IDxjb2RlPiZsdDt0eHA6c2l0
ZV91cmwgLyZndDtleHRfZmlsZXMveW91cmZpbGUuaHRtbDwvY29kZT48L2xpPgo8L3VsPgoK
PGhyIC8+Cgo8aDI+SW5zdHJ1Y3Rpb25zOjwvaDI+Cgo8b2w+CjxsaT5DcmVhdGUgYSBkaXJl
Y3RvcnkgZm9yIHRoZSBzdGF0aWMgZXh0ZXJuYWwgZmlsZXMgaW4gdGhlIHJvb3Qgb2YgeW91
ciB0ZXh0cGF0dGVybiBpbnN0YWxsYXRpb24gY2FsbGVkIOKAmGV4dF9maWxlc+KAmSAob3Ig
d2hhdGV2ZXIgeW91IGxpa2UpLiBZb3Ugc2hvdWxkIG1ha2Ugc3VyZSB0aGF0IFBIUCBpcyBh
YmxlIHRvIHdyaXRlIHRvIHRoYXQgZGlyZWN0b3J5LjwvbGk+CjxsaT5WaXNpdCB0aGUgYWR2
YW5jZWQgcHJlZmVyZW5jZXMgYW5kIG1ha2Ugc3VyZSB0aGUg4oCcRXh0ZXJuYWwgZmlsZXMg
ZGlyZWN0b3J54oCdIHByZWZlcmVuY2UgY29udGFpbnMgdGhlIGRpcmVjdG9yeSB5b3UgY3Jl
YXRlZCBpbiBzdGVwIDEgKGJ5IGRlZmF1bHQg4oCYZXh0X2ZpbGVz4oCZKS4gVGhpcyBwYXRo
IGlzIHJlbGF0aXZlIHBhdGggdG8gdGhlIGRpcmVjdG9yeSBvZiB5b3VyIHJvb3QgVGV4dHBh
dHRlcm4gaW5zdGFsbGF0aW9uLjwvbGk+CjxsaT5BY3RpdmF0ZSB0aGlzIHBsdWdpbi48L2xp
Pgo8bGk+R28gdG8gRXh0ZW5zaW9ucyAmZ3Q7IEV4dGVybmFsIEZpbGVzIGFuZCBjcmVhdGUg
ZmlsZXMgeW914oCZZCBsaWtlIHRvIG1hbmFnZS48L2xpPgo8bGk+QWx3YXlzIGluY2x1ZGUg
YSBmaWxlIGV4dGVuc2lvbiBpbiB0aGUgZmlsZSBuYW1lICguaHRtbCwgLnBocCwgZXRjLiku
PC9saT4KPC9vbD4KCjxoMj5Qcm9jZWR1cmUgZm9yIG1hbmFnaW5nIGV4aXN0aW5nIGZpbGVz
OjwvaDI+CjxvbD4KPGxpPkNvcHkgdGhlIGNvbnRlbnRzIG9mIHRoZSBmaWxlIChjYWxsZWQg
Zm9yIGV4YW1wbGUgbXlmaWxlLnBocCkgaW50byBhIG5ldyBmaWxlIGluIEV4dGVuc2lvbnMg
Jmd0OyBFeHRlcm5hbCBGaWxlcyAmZ3Q7IENyZWF0ZSBuZXcgZmlsZS48L2xpPgo8bGk+TmFt
ZSB0aGUgbmV3IGZpbGUgKEV4dGVybmFsIGZpbGUgbmFtZTopIOKAmG15ZmlsZS5waHDigJku
PC9saT4KPGxpPlJlbmFtZSB0aGUgb3JpZ2luYWwgZmlsZSAodG8sIGZvciBleGFtcGxlLCDi
gJhteWZpbGVfb3JpZ2luYWwucGhw4oCZKSAtIHRoZW4geW914oCZbGwgaGF2ZSBhIGJhY2t1
cC48L2xpPgo8bGk+TWFrZSBhIHN5bWJvbGljIGxpbmssIGluIHRoZSBvcmlnaW5hbCBmaWxl
IGxvY2F0aW9uLCB0byB0aGUgbmV3IGZpbGUgKGUuZy4gY2QgdG8gdGhlIOKAmGV4dF9maWxl
c+KAmSBkaXJlY3RvcnkgYW5kIHRoZW4g4oCYbG4gLXMgL29yaWdpbmFsX2RpcmVjdG9yeV9w
YXRoL215ZmlsZS5waHAgLi9teWZpbGUucGhw4oCZKS48L2xpPgo8L29sPgoKPGhyIC8+Cgo8
aDI+Tm90ZXM6PC9oMj4KPG9sPgo8bGk+WW91IGNhbiBvbmx5IG1hbmFnZSBmaWxlcyB3aGlj
aCBhcmUgcmVhZC93cml0ZSB0byB5b3VyIHdlYiBzZXJ2ZXIgZS5nLiBNaW5pZnkgY29uZmln
IGZpbGVzLCBleHRlcm5hbCBzY3JpcHRzLCBldGMuPC9saT4KPGxpPkRlbGV0aW5nIGEgZmls
ZSB2aWEgdGhlIEV4dGVybmFsIEZpbGVzIHRhYiBkZWxldGVzIHRoZSBhY3R1YWwgZmlsZSBp
biB0aGUg4oCZZXh0X2ZpbGVz4oCZIGRpcmVjdG9yeSAoYXMgd2VsbCBhcyB0aGUgZGF0YWJh
c2UgZW50cnkpIC0gdXNlIHdpdGggY2FyZSEuPC9saT4KPC9vbD4KCgo8aDI+TGFuZ3VhZ2Vz
IChUZXh0cGFjayk8L2gyPgo8dWw+CjxsaT5UaGlzIHBsdWdpbiBpbnN0YWxscyBhbiBFbmds
aXNoIFRleHRwYWNrIGJ5IGRlZmF1bHQuPC9saT4KPGxpPlRvIGluc3RhbGwgYSBUZXh0cGFj
ayBmb3IgeW91ciBvd24gbGFuZ3VhZ2Ugc2VlIHRoZSA8YSBocmVmPSJodHRwczovL2dpdGh1
Yi5jb20vc3BpZmZpbi9zcGZfZXh0L2Jsb2IvbWFzdGVyL3NwZl9leHRfdGV4dHBhY2sudHh0
Ij5pbnN0cnVjdGlvbnMgb24gR2l0SHViPC9hPi48L2xpPgo8L3VsPgoKPGgyPlZlcnNpb24g
aGlzdG9yeTwvaDI+Cjx1bD4KPGxpPjAuMzEgLSA3IE5vdmVtYmVyIDIwMTIgLSByZXdyaXR0
ZW4gZm9yIFRleHRwYXR0ZXJuIDQuNS54LjwvbGk+CjxsaT4wLjIgLSAyNiBBdWd1c3QgMjAx
MiAtIHNlY3VyaXR5IGVuaGFuY2VtZW50cyAodGhhbmtzIEp1a2thKS48L2xpPgo8bGk+MC4x
IC0gQXByaWwgMjAxMiAtIGZpcnN0IHJlbGVhc2UuPC9saT4KPC91bD4iO3M6NDoiY29kZSI7
czo4ODgwOiIvKioKICogc3BmX2V4dCAtIEV4dGVybmFsIGZpbGUgZWRpdG9yIGZvciBUZXh0
cGF0dGVybgogKgogKiDCqSAyMDEyIFNpbW9uIEZpbmNoIC0gaHR0cHM6Ly9naXRodWIuY29t
L3NwaWZmaW4vc3BmX2V4dAogKgogKiBMaWNlbnNlZCB1bmRlciBHTlUgR2VuZXJhbCBQdWJs
aWMgTGljZW5zZSB2ZXJzaW9uIDIKICogaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dw
bC0yLjAuaHRtbAogKgogKiBWZXJzaW9uIDAuMzEgLS0gNyBOb3ZlbWJlciAyMDEyCiAqLwoK
LyoqCiAqIFNldHVwIHRhYnMgYW5kIGNhbGxiYWNrCiAqLwoKaWYgKEB0eHBpbnRlcmZhY2Ug
PT0gJ2FkbWluJykgewoKICAgIGFkZF9wcml2cygnc3BmX2V4dCcsICcxJyk7CiAgICByZWdp
c3Rlcl90YWIoJ2V4dGVuc2lvbnMnLCAnc3BmX2V4dCcsIGdUeHQoJ3NwZl9leHRfZmlsZXMn
KSk7CiAgICByZWdpc3Rlcl9jYWxsYmFjaygnc3BmX2V4dF9ndWknLCAnc3BmX2V4dCcpOwog
ICAgcmVnaXN0ZXJfY2FsbGJhY2soJ3NwZl9leHRfaW5zdGFsbCcsICdwbHVnaW5fbGlmZWN5
Y2xlLnNwZl9leHQnLCAnaW5zdGFsbGVkJyk7CiAgICByZWdpc3Rlcl9jYWxsYmFjaygnc3Bm
X2V4dF9yZW1vdmUnLCAncGx1Z2luX2xpZmVjeWNsZS5zcGZfZXh0JywgJ2RlbGV0ZWQnKTsK
Cn0KCi8qKgogKiBHVUkgZnVuY3Rpb25zIC8gc3RlcCBkaXNwYXRjaGVyCiAqLwoKZnVuY3Rp
b24gc3BmX2V4dF9ndWkoKSB7CgogICAgZ2xvYmFsICRldmVudCwgJHN0ZXA7CgogICAgaWYg
KCRldmVudCA9PSAnc3BmX2V4dCcpIHsKICAgICAgICByZXF1aXJlX3ByaXZzKCdzcGZfZXh0
Jyk7CgogICAgICAgIGJvdW5jZXIoJHN0ZXAsCiAgICAgICAgICAgIGFycmF5KAogICAgICAg
ICAgICAgICAgJ3NwZl9leHRfZWRpdF9yYXcnICAgPT4gZmFsc2UsCiAgICAgICAgICAgICAg
ICAncG91cicgICAgICAgICAgICAgID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3NwZl9l
eHRfc2F2ZScgICAgICAgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzcGZfZXh0X2NvcHkn
ICAgICAgID0+IHRydWUsCiAgICAgICAgICAgICAgICAnc3BmX2V4dF9kZWxldGUnICAgICA9
PiB0cnVlLAogICAgICAgICAgICAgICAgJ3NwZl9leHRfZWRpdCcgICAgICAgPT4gZmFsc2Us
CiAgICAgICAgICAgICkKICAgICAgICApOwoKICAgICAgICBzd2l0Y2ggKCRzdGVwKSB7CiAg
ICAgICAgICAgIGNhc2UgJyc6IHNwZl9leHRfZWRpdCgpOyAgICAgICAgICAgICAgICAgICAg
ICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc3BmX2V4dF9lZGl0X3Jhdyc6IHNwZl9l
eHRfZWRpdCgpOyAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncG91cic6IHNw
Zl9leHRfZWRpdCgpOyAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBj
YXNlICdzcGZfZXh0X3NhdmUnOiBzcGZfZXh0X3NhdmUoKTsgICAgICAgICAgICAgIGJyZWFr
OwogICAgICAgICAgICBjYXNlICdzcGZfZXh0X2NvcHknOiBzcGZfZXh0X2NvcHkoKTsgICAg
ICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdzcGZfZXh0X2RlbGV0ZSc6IHNw
Zl9leHRfZGVsZXRlKCk7ICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdzcGZf
ZXh0X2VkaXQnOiBzcGZfZXh0X2VkaXQoKTsKICAgICAgICB9CiAgICB9Cn0KCi8qKgogKiBS
ZW1vdmFsIGZ1bmN0aW9uCiAqLwoKZnVuY3Rpb24gc3BmX2V4dF9yZW1vdmUoJGV2ZW50LCAk
c3RlcCkgewpnbG9iYWwgJHByZWZzLCAkc3RlcDsKCiAgICBpZihpc3NldCgkcHJlZnNbJ3Nw
Zl9leHRfZGlyJ10pKSB7CgogICAgICAgIHNhZmVfZGVsZXRlKAogICAgICAgICAgICAndHhw
X3ByZWZzJywKICAgICAgICAgICAgIm5hbWU9J3NwZl9leHRfZGlyJyIKICAgICAgICApOwoK
ICAgICAgICAvLyBEb24ndCBkcm9wIHRoZSB0YWJsZSAtIGp1c3QgaW4gY2FzZS4KICAgICAg
ICAvL0BzYWZlX3F1ZXJ5KAogICAgICAgIC8vICAgICdEUk9QIFRBQkxFIElGIEVYSVNUUyAn
LnNhZmVfcGZ4KCdzcGZfZXh0JykKICAgICAgICAvLyk7CgogICAgICAgIC8vIGRlbGV0ZSB0
aGUgVGV4dHBhY2sKCiAgICAgICAgc2FmZV9kZWxldGUoCiAgICAgICAgICAgICd0eHBfbGFu
ZycsCiAgICAgICAgICAgICJldmVudCA9ICdzcGZfZXh0JyIKICAgICAgICApOwoKICAgIH0K
Cn0KCi8qKgogKiBJbnN0YWxsZXIgZnVuY3Rpb24KICovCgpmdW5jdGlvbiBzcGZfZXh0X2lu
c3RhbGwoJGV2ZW50LCAkc3RlcCkgewpnbG9iYWwgJHByZWZzLCAkc3RlcDsKCiAgICBpZigh
aXNzZXQoJHByZWZzWydzcGZfZXh0X2RpciddKSkgewoKICAgICAgICBzYWZlX3F1ZXJ5KAog
ICAgICAgICAgICAiQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgIi5zYWZlX3BmeCgnc3Bm
X2V4dCcpLiIgKAogICAgICAgICAgICAgICAgZmlsZW5hbWUgdmFyY2hhcigyNTUpIE5PVCBO
VUxMIGRlZmF1bHQgJycsCiAgICAgICAgICAgICAgICBjb250ZW50IGxvbmd0ZXh0IE5PVCBO
VUxMLAogICAgICAgICAgICAgICAgUFJJTUFSWSBLRVkoZmlsZW5hbWUpCiAgICAgICAgICAg
ICkgQ0hBUlNFVD11dGY4IgogICAgICAgICk7CgogICAgICAgIGlmKCFzYWZlX2NvdW50KCJz
cGZfZXh0IiwgImZpbGVuYW1lPSdob2xkZXIudHh0JyIpKSB7CgogICAgICAgICAgICBzYWZl
X2luc2VydCgic3BmX2V4dCIsICJmaWxlbmFtZT0naG9sZGVyLnR4dCcsIGNvbnRlbnQ9J0hv
bGRlciB0ZXh0IGZpbGUuLi55b3UgbmVlZCBhdCBsZWFzdCBvbmUgZmlsZSBoZXJlLiciKTsK
CiAgICAgICAgfQoKICAgICAgICBzYWZlX2luc2VydCgKICAgICAgICAgICAgJ3R4cF9wcmVm
cycsCiAgICAgICAgICAgICJwcmVmc19pZD0xLAogICAgICAgICAgICBuYW1lPSdzcGZfZXh0
X2RpcicsCiAgICAgICAgICAgIHZhbD0nZXh0X2ZpbGVzJywKICAgICAgICAgICAgdHlwZT0x
LAogICAgICAgICAgICBldmVudD0nYWRtaW4nLAogICAgICAgICAgICBodG1sPSd0ZXh0X2lu
cHV0JywKICAgICAgICAgICAgcG9zaXRpb249MjIiCiAgICAgICAgKTsKICAgIH0KfQoKLyoq
CiAqIExpc3QgZnVuY3Rpb24KICovCgpmdW5jdGlvbiBzcGZfZXh0X2xpc3QoJGN1cnJlbnQp
IHsKCiAgICAvLyRvdXRbXSA9IHN0YXJ0VGFibGUoJ2xpc3QnLCAnbGVmdCcpOwoKJG91dFtd
ID0gc3RhcnRUYWJsZSgnJywgJycsICd0eHAtbGlzdCcpOwoKICAgICRycyA9IHNhZmVfcm93
c19zdGFydCgnZmlsZW5hbWUnLCAnc3BmX2V4dCcsICIxPTEiKTsKCiAgICBpZiAoJHJzKSB7
CgogICAgICAgIHdoaWxlICgkYSA9IG5leHRSb3coJHJzKSkgewogICAgICAgICAgICBleHRy
YWN0KCRhKTsKICAgICAgICAgICAgJGVkaXQgPSAoJGN1cnJlbnQgIT0gJGZpbGVuYW1lKSA/
IGVMaW5rKCdzcGZfZXh0JywgJycsICdmaWxlbmFtZScsICRmaWxlbmFtZSwgJGZpbGVuYW1l
KSA6IHR4cHNwZWNpYWxjaGFycygkZmlsZW5hbWUpOwogICAgICAgICAgICAkZGVsZXRlID0g
KCRmaWxlbmFtZSkgPyBkTGluaygnc3BmX2V4dCcsICdzcGZfZXh0X2RlbGV0ZScsICdmaWxl
bmFtZScsICRmaWxlbmFtZSkgOiAnJzsKICAgICAgICAgICAgJG91dFtdID0gdHIodGQoJGVk
aXQpLnRkKCRkZWxldGUpKTsKICAgICAgICB9CgogICAgICAgICRvdXRbXSA9ICBlbmRUYWJs
ZSgpOwoKICAgICAgICByZXR1cm4gam9pbignJywgJG91dCk7CgogICAgfQp9CgovKioKICog
RWRpdCBmdW5jdGlvbgogKi8KCmZ1bmN0aW9uIHNwZl9leHRfZWRpdCgkbWVzc2FnZT0nJykg
ewoKICAgIHBhZ2V0b3AoZ1R4dCgnc3BmX2V4dF9maWxlcycpLCRtZXNzYWdlKTsKICAgIGds
b2JhbCAkc3RlcCwgJHByZWZzOwogICAgc3BmX2V4dF9lZGl0X3JhdygpOwoKfQoKLyoqCiAq
IEVkaXQgZnVuY3Rpb24gKHJhdykKICovCgpmdW5jdGlvbiBzcGZfZXh0X2VkaXRfcmF3KCkg
ewoKICAgIGdsb2JhbCAkZXZlbnQsICRzdGVwOwoKICAgICRmaXJzdCA9IHNhZmVfcm93KCdm
aWxlbmFtZScsICdzcGZfZXh0JywgIjE9MSIpOwogICAgJGZpcnN0X2ZpbGUgPSAkZmlyc3Rb
J2ZpbGVuYW1lJ107CgogICAgZXh0cmFjdChncHNhKGFycmF5KCdmaWxlbmFtZScsICduZXdu
YW1lJywgJ2NvcHknLCAnc2F2ZW5ldycpKSk7CgogICAgaWYgKCRzdGVwID09ICdzcGZfZXh0
X2RlbGV0ZScgfHwgZW1wdHkoJGZpbGVuYW1lKSAmJiAkc3RlcCAhPSAncG91cicgJiYgISRz
YXZlbmV3KSB7CgogICAgICAgICRmaWxlbmFtZSA9ICRmaXJzdF9maWxlOwoKICAgIH0KCiAg
ICBlbHNlaWYgKCgkY29weSB8fCAkc2F2ZW5ldykgJiYgdHJpbShwcmVnX3JlcGxhY2UoJy9b
PD4mIlwnXS8nLCAnJywgJG5ld25hbWUpKSkgewoKICAgICAgICAkZmlsZW5hbWUgPSAkbmV3
bmFtZTsKCiAgICB9CgogICAgaWYgKGVtcHR5KCRmaWxlbmFtZSkpIHsKCiAgICAgICAgJGJ1
dHRvbnMgPSAnPGRpdiBjbGFzcz0iZWRpdC10aXRsZSI+Jy4KICAgICAgICBnVHh0KCdzcGZf
ZmlsZV9uYW1lJykuJzogJwogICAgICAgIC5mSW5wdXQoJ3RleHQnLCduZXduYW1lJywnJywn
ZWRpdCcsJycsJycsMjApLgogICAgICAgIGhJbnB1dCgnc2F2ZW5ldycsJ3NhdmVuZXcnKS4K
ICAgICAgICAnPC9kaXY+JzsKICAgICAgICAkZmlsZWNvbnRlbnQgPSBncHMoJ3NwZl9leHQn
KTsKCiAgICB9IGVsc2UgewoKICAgICAgICAkYnV0dG9ucyA9ICc8ZGl2IGNsYXNzPSJlZGl0
LXRpdGxlIj4nLmdUeHQoJ3NwZl9lZGl0X3NjcmlwdCcpLnNwLnN0cm9uZyh0eHBzcGVjaWFs
Y2hhcnMoJGZpbGVuYW1lKSkuJzwvZGl2Pic7CiAgICAgICAgJGZpbGVjb250ZW50ID0gZmV0
Y2goImNvbnRlbnQiLCdzcGZfZXh0JywnZmlsZW5hbWUnLCRmaWxlbmFtZSk7CgogICAgfQoK
ICAgIGlmICghZW1wdHkoJGZpbGVuYW1lKSkgewoKICAgICAgICAkY29weSA9ICc8c3BhbiBj
bGFzcz0iY29weS1hcyI+PGxhYmVsIGZvcj0iY29weS1maWxlIj4nLmdUeHQoJ3NwZl9jb3B5
X2ZpbGUnKS4nPC9sYWJlbD4nLnNwLmZJbnB1dCgndGV4dCcsICduZXduYW1lJywgJycsICdl
ZGl0JywgJycsICcnLCAnJywgJycsICdjb3B5LWZpbGUnKS5zcC4KICAgICAgICAgICAgZklu
cHV0KCdzdWJtaXQnLCAnY29weScsIGdUeHQoJ2NvcHknKSwgJ3NtYWxsZXJib3gnKS4nPC9z
cGFuPic7CgogICAgfSBlbHNlIHsKCiAgICAgICAgJGNvcHkgPSAnJzsKCiAgICB9CgogICAg
JHJpZ2h0ID0KICAgICc8ZGl2IGlkPSJjb250ZW50X3N3aXRjaGVyIj4nLgogICAgaGVkKGdU
eHQoJ3NwZl9hbGxfZmlsZXMnKSwyKS4KICAgIGdyYWYoc0xpbmsoJ3NwZl9leHQnLCAncG91
cicsIGdUeHQoJ3NwZl9jcmVhdGVfbmV3X2ZpbGUnKSksICcgY2xhc3M9ImFjdGlvbi1jcmVh
dGUiJykuCiAgICBzcGZfZXh0X2xpc3QoJGZpbGVuYW1lKS4KICAgICc8L2Rpdj4nOwoKICAg
IGVjaG8KICAgICc8aDEgY2xhc3M9InR4cC1oZWFkaW5nIj4nLmdUeHQoJ3NwZl9leHRfZmls
ZXMnKS4nPC9oMT4nLgogICAgJzxkaXYgaWQ9IicuJGV2ZW50LidfY29udGFpbmVyIiBjbGFz
cz0idHhwLWNvbnRhaW5lciI+Jy4KICAgIHN0YXJ0VGFibGUoJycsICcnLCAndHhwLWNvbHVt
bnRhYmxlJykuCiAgICB0cigKICAgICAgICB0ZCgKICAgICAgICAgICAgZm9ybSgKICAgICAg
ICAgICAgICAgICc8ZGl2IGlkPSJtYWluX2NvbnRlbnQiPicuCiAgICAgICAgICAgICAgICAk
YnV0dG9ucy4KICAgICAgICAgICAgICAgICc8dGV4dGFyZWEgaWQ9InNwZl9leHQiIGNsYXNz
PSJjb2RlIiBuYW1lPSJzcGZfZXh0IiBjb2xzPSInLklOUFVUX0xBUkdFLiciIHJvd3M9Iicu
SU5QVVRfUkVHVUxBUi4nIiBzdHlsZT0iaGVpZ2h0OiAzOS4yNWVtOyI+Jy50eHBzcGVjaWFs
Y2hhcnMoJGZpbGVjb250ZW50KS4nPC90ZXh0YXJlYT4nLgogICAgICAgICAgICAgICAgJzxw
PicuZklucHV0KCdzdWJtaXQnLCcnLGdUeHQoJ3NhdmUnKSwncHVibGlzaCcpLgogICAgICAg
ICAgICAgICAgZUlucHV0KCdzcGZfanMnKS5zSW5wdXQoJ3NwZl9qc19zYXZlJykuCiAgICAg
ICAgICAgICAgICBoSW5wdXQoJ2ZpbGVuYW1lJywkZmlsZW5hbWUpLic8L3A+JwogICAgICAg
ICAgICAgICAgLiRjb3B5LgogICAgICAgICAgICAgICAgJzwvZGl2PicKICAgICAgICAgICAg
LCAnJywgJycsICdwb3N0JywgJ2VkaXQtZm9ybScsICcnLCAnc3R5bGVfZm9ybScpCiAgICAg
ICAgLCAnJywgJ2NvbHVtbicpLgogICAgICAgIHRkdGwoCiAgICAgICAgICAgICRyaWdodAog
ICAgICAgICwgJyBjbGFzcz0iY29sdW1uIicpCiAgICApLgogICAgZW5kVGFibGUoKS4KICAg
ICc8L2Rpdj4nOwp9CgovKioKICogQ29weSBmdW5jdGlvbgogKgogKi8KCmZ1bmN0aW9uIHNw
Zl9leHRfY29weSgpIHsKCiAgICBleHRyYWN0KGdwc2EoYXJyYXkoJ29sZG5hbWUnLCAnbmV3
bmFtZScpKSk7CgogICAgJGNvbnRlbnQgPSBkb1NsYXNoKGZldGNoKCdjb250ZW50JywgJ3Nw
Zl9leHQnLCAnZmlsZW5hbWUnLCAkb2xkbmFtZSkpOwoKICAgICRycyA9IHNhZmVfaW5zZXJ0
KCdzcGZfZXh0JywgImNvbnRlbnQgPSAnJGNvbnRlbnQnLCBmaWxlbmFtZSA9ICciLmRvU2xh
c2goJG5ld25hbWUpLiInIik7CgogICAgc3BmX2V4dF9lZGl0KAogICAgICAgIGdUeHQoJ3Nw
Zl9maWxlX2NyZWF0ZWQnLCBhcnJheSgne25hbWV9JyA9PiAkbmV3bmFtZSkpCiAgICApOwp9
CgovKioKICogU2F2ZSBmdW5jdGlvbgogKi8KCmZ1bmN0aW9uIHNwZl9leHRfc2F2ZSgpIHsK
CiAgICBleHRyYWN0KGdwc2EoYXJyYXkoJ2ZpbGVuYW1lJywnc3BmX2V4dCcsJ3NhdmVuZXcn
LCduZXduYW1lJywnY29weScpKSk7CiAgICAkY29udGVudCA9IGRvU2xhc2goJHNwZl9leHQp
OwoKICAgIGlmICgkc2F2ZW5ldyBvciAkY29weSkgewoKICAgICAgICAkbmV3bmFtZSA9IGRv
U2xhc2godHJpbShwcmVnX3JlcGxhY2UoJy9bPD4mIlwnXS8nLCAnJywgZ3BzKCduZXduYW1l
JykpKSk7CgogICAgICAgIGlmICgkbmV3bmFtZSBhbmQgc2FmZV9maWVsZCgnZmlsZW5hbWUn
LCAnc3BmX2V4dCcsICJmaWxlbmFtZSA9ICckbmV3bmFtZSciKSkgewoKICAgICAgICAgICAg
JG1lc3NhZ2UgPSBnVHh0KCdzcGZfZmlsZV9leGlzdHMnLCBhcnJheSgne25hbWV9JyA9PiAk
bmV3bmFtZSkpOwoKICAgICAgICAgICAgaWYgKCRzYXZlbmV3KSB7CgogICAgICAgICAgICAg
ICAgJF9QT1NUWyduZXduYW1lJ10gPSAnJzsKCiAgICAgICAgICAgIH0KCiAgICAgICAgfSBl
bHNlaWYgKCRuZXduYW1lKSB7CgogICAgICAgICAgICBzYWZlX2luc2VydCgnc3BmX2V4dCcs
ICJmaWxlbmFtZSA9ICciLiRuZXduYW1lLiInLCBjb250ZW50ID0gJyRjb250ZW50JyIpOwoK
ICAgICAgICAgICAgJG1lc3NhZ2UgPSBnVHh0KCdzcGZfZmlsZV9jcmVhdGVkJywgYXJyYXko
J3tuYW1lfScgPT4gJG5ld25hbWUpKTsKCiAgICAgICAgICAgIHNwZl9leHRfd3JpdGUoKTsK
CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICRtZXNzYWdlID0gYXJyYXkoZ1R4dCgn
c3BmX2ZpbGVfbmFtZV9yZXF1aXJlZCcpLCBFX0VSUk9SKTsKCiAgICAgICAgfQoKICAgICAg
ICBzcGZfZXh0X2VkaXQoJG1lc3NhZ2UpOwoKICAgIH0gZWxzZSB7CgogICAgICAgIHNhZmVf
dXBkYXRlKCdzcGZfZXh0JywgImNvbnRlbnQgPSAnJGNvbnRlbnQnIiwgImZpbGVuYW1lID0g
JyIuZG9TbGFzaCgkZmlsZW5hbWUpLiInIik7CgogICAgICAgICRtZXNzYWdlID0gZ1R4dCgn
c3BmX2ZpbGVfdXBkYXRlZCcsIGFycmF5KCd7bmFtZX0nID0+ICRmaWxlbmFtZSkpOwoKICAg
ICAgICBzcGZfZXh0X3dyaXRlKCk7CgogICAgICAgIHNwZl9leHRfZWRpdCgkbWVzc2FnZSk7
CgogICAgfQoKfQoKLyoqCiAqIFdyaXRlIGZ1bmN0aW9uCiAqLwoKZnVuY3Rpb24gc3BmX2V4
dF93cml0ZSgpIHsKCiAgICBnbG9iYWwgJHByZWZzOwogICAgZXh0cmFjdChncHNhKGFycmF5
KCdmaWxlbmFtZScsJ3NwZl9leHQnLCdzYXZlbmV3JywnbmV3bmFtZScsJ2NvcHknKSkpOwoK
ICAgICRmaWxlbmFtZSA9IChwcygnY29weScpIG9yIHBzKCdzYXZlbmV3JykpID8gcHMoJ25l
d25hbWUnKSA6IHBzKCdmaWxlbmFtZScpOwogICAgJGZpbGUgPSAkcHJlZnNbJ3BhdGhfdG9f
c2l0ZSddLicvJy4kcHJlZnNbJ3NwZl9leHRfZGlyJ10uJy8nLnNhbml0aXplRm9yRmlsZSgk
ZmlsZW5hbWUpOwoKICAgIGlmIChlbXB0eSgkcHJlZnNbJ3NwZl9leHRfZGlyJ10pIG9yICEk
ZmlsZW5hbWUpIHsKCiAgICAgICAgcmV0dXJuOwoKICAgIH0gZWxzZSB7CgogICAgJGNvbnRl
bnRfcmF3ID0gZmV0Y2goImNvbnRlbnQiLCAic3BmX2V4dCIsICdmaWxlbmFtZScsICRmaWxl
bmFtZSk7IC8vIE1vdmVkIGhlcmUgdG8gc2F2ZSBuZXdseS1jcmVhdGVkIGZpbGVzCgogICAg
ICAgICRoYW5kbGUgPSBmb3BlbigkZmlsZSwgJ3diJyk7CiAgICAgICAgZndyaXRlKCRoYW5k
bGUsICRjb250ZW50X3Jhdyk7CiAgICAgICAgZmNsb3NlKCRoYW5kbGUpOwogICAgICAgIGNo
bW9kKCRmaWxlLCAwNjQ0KTsKICAgIH0KCn0KCi8qKgogKiBEZWxldGUgZnVuY3Rpb24KICov
CgpmdW5jdGlvbiBzcGZfZXh0X2RlbGV0ZSgpIHsKCiAgICBnbG9iYWwgJHByZWZzOwoKICAg
ICRmaWxlbmFtZSA9IHBzKCdmaWxlbmFtZScpOwogICAgJGZpbGUgPSAkcHJlZnNbJ3BhdGhf
dG9fc2l0ZSddLicvJy4kcHJlZnNbJ3NwZl9leHRfZGlyJ10uJy8nLiRmaWxlbmFtZTsKCiAg
ICAgICAgaWYgKCFlbXB0eSgkcHJlZnNbJ3NwZl9leHRfZGlyJ10pIGFuZCAkZmlsZW5hbWUp
IHsKCiAgICAgICAgICAgIHNhZmVfZGVsZXRlKCdzcGZfZXh0JywgImZpbGVuYW1lID0gJyIu
ZG9TbGFzaCgkZmlsZW5hbWUpLiInIik7CgogICAgICAgICAgICBAdW5saW5rKCRmaWxlKTsK
CiAgICAgICAgc3BmX2V4dF9lZGl0KAoKICAgICAgICAgICAgZ1R4dCgnc3BmX2ZpbGVfZGVs
ZXRlZCcsIGFycmF5KCd7bmFtZX0nID0+ICRmaWxlbmFtZSkpCiAgICAgICAgKTsKCiAgICB9
IGVsc2UgewogICAgICAgIHJldHVybjsKICAgIH0KCn0iO3M6MzoibWQ1IjtzOjMyOiIxZjAw
MDg2OTA4OTIxYTgyZTg1Yjk1MjljNzVlYTQ0MCI7fQ==